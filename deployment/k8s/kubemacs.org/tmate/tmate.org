# -*- ii: y; -*-
#+TITLE: tmate.kubemacs.org config
* Check out the tmate src
Checking out the directions from tmate.io

#+begin_src tmate :dir "~/" :session ii:src
git clone https://github.com/tmate-io/tmate-ssh-server.git
git clone https://github.com/tmate-io/tmate-websocket.git
git clone https://github.com/tmate-io/tmate-master.git
git clone https://github.com/tmate-io/tmate-kube.git
#+end_src
* Modify Tilt / kustomize
[[./Tiltfile]]
[[~/tmate-kube/dev/master.yaml::kind:%20Deployment]]
#+begin_src tmate :dir "." :session ii:tmate-tilt
export TMATE_NS=tmate
kubectl create ns $TMATE_NS
kubectl config set-context $(kubectl config current-context) --namespace=$TMATE_NS
tilt up --host 0.0.0.0 --port 10350
#+end_src
* mix command
#+begin_src shell :dir "."
kubectl exec -it deploy/master mix do ecto.create, ecto.migrate
#+end_src

#+RESULTS:
#+begin_example
The database for Tmate.Repo has already been created

16:34:01.463 [info]  Already up
#+end_example
