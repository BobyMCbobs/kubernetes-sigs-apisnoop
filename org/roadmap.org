#+TITLE: APISnoop 1.20 OKRs
#+AUTHOR: ii.coop

* v1.20 
Our goal is to not make radical changes to process or approach, but iterate on our working methods to increase velocity and output in a stable, consistent way.
** Looking back at 1.19
*** **Gate cncf/k8s-conformance PR's**
   - **KR1** Setup prow.cncf.io
   - **KR2** Connect cncf/k8s-conformance to prow.cncf.io
   - **KR3** gate+comment
   * The Conformance gate is implemented and tested on 
    [[https://github.com/cncf-infra/k8s-conformance/][cncf-infra/k8s-conformance]].
   * It is ready to be pointed at [[https://github.com/cncf/k8s-conformance/][cncf/k8s-conformance]].
*** **Next steps for cncf/K8s-conformance gate**
   - Agree on implementation date
   - Update and improve based on feedback
   - Maintenance strategy
*** **Gate k/k of PR's touching test/e2e or API**   
   - The high level overview was agreed in the SIG Architecture office hours meeting
   - There was no objections from the community
   - We are soliciting feedback from SIG Testing on the technical details

*** **Increase Stable Test Coverage by 40 endpoints**
*** **KR1 (39/40) new conformant stable endpoints**
- Community introduced 41 New endpoints to GA
- 40 Endpoint was introduced with tests
- ii introduced Conformance tests for 38 old endpoints
- ii added a Conformance test to 1 new endpoints promoted without a test 
*** **KR2 (17.54% / +9%) Coverage Increase**
  **38.86%->56.4%**
- Target have been exceeded with ii and the community's effort
- Percentage would not be used as a measure from 1.20
- Percentage many not be a clear indicator due to:
  - New endpoints, deprecation and ineligible endpoints etc.
*** **KR3 (stretch 56.4%) +50% stable endpoints hit by conformance tests**
- Achieved by the team work of ii and the community
*** **Achievements not in OKRs for 1.19**
*** Preventing further technical debt
- Two Endpoints graduated from Beta to GA sans Conformance
- Both endpoints was picked-up by APISnoop and Conformance tests where add in 1.19
- We allowed no new technical debt
*** APISnoop improvements in 1.19
   - New endpoints for each release beneath sunburst
   - Progress graph toggle between percentage and numbers
   - SnoopDB (openAPI spec + conformance coverage)
   - Coverage data taken from e2e test suite runs
   - Used for CI / coverage updates
   - Used for research and issue creation
     
** Looking forward to 1.20
** **Gate cncf/k8s-conformance PRs**
- The next steps for production implementation must be agreed
** **Gate k/k PRs touching test/e2e or API**
*** **Identify list of endpoints added/removed**
- Tooling will compare path/operation id in api/openapi-spec/swagger.json
  - Generate list of new endpoints
  - Generate list of removed endpoints
- Run APISnoop against PR to generate endpoint coverage review
*** **Tooling will provide a list of tested and conformant endpoints.**
  - Wait for main prow job to finish
  - Generate list of hit/tested endpoints
  - Generate list of conformant endpoints
  - Bot comment with list of increase/decrease of endpoints
*** **Tooling will comment directly on PR + Link to APISnoop landing page**
- **Alpha & Beta:** List endpoints needing tests. Note: Endpoints can not be promoted to GA without Conformance test.
- **Stable:** comment+block via tag. (List endpoints needing tests. Note: Endpoints can not be promoted to GA without Conformance test.)
*** **APISnoop landing page**
Explain conformance testing is a requirement for Endpoints to be promoted to GA
- List documents:
 - Conformance Test Requirements
 - Promoting Tests to Conformance
 - Writing good e2e tests for Kubernetes
 - Introduction to APISnoop tool + links
 - Explanation & Access to different release data
 - Link to Conformance Office Hours Meeting Notes
*** The goal is to introduce the k/k gate in the next month or two
** **Increase Stable Test Coverage**
*** **KR1 increase new conformant stable endpoints**
- Goal: 30
- Stretch Goal: 40
- Moving over 50% conformance would likeky increase complexity
*** **KR2 clean-up technical debt**
- Goal: Clean technical debt back to 1.15
- Stretch Goal: 6 of 18 Endpoints of 1.14

** **Looking forward to a successful 1.20** 



* Footnotes

#+REVEAL_ROOT: https://cdn.jsdelivr.net/npm/reveal.js
# #+REVEAL_TITLE_SLIDE:
#+NOREVEAL_DEFAULT_FRAG_STYLE: YY
#+NOREVEAL_EXTRA_CSS: YY
#+NOREVEAL_EXTRA_JS: YY
#+REVEAL_HLEVEL: 2
#+REVEAL_MARGIN: 0.1
#+REVEAL_WIDTH: 1000
#+REVEAL_HEIGHT: 600
#+REVEAL_MAX_SCALE: 3.5
#+REVEAL_MIN_SCALE: 0.2
#+REVEAL_PLUGINS: (markdown notes highlight multiplex)
#+REVEAL_SLIDE_NUMBER: ""
#+REVEAL_SPEED: 1
#+REVEAL_THEME: sky
#+REVEAL_THEME_OPTIONS: beige|black|blood|league|moon|night|serif|simple|sky|solarized|white
#+REVEAL_TRANS: cube
#+REVEAL_TRANS_OPTIONS: none|cube|fade|concave|convex|page|slide|zoom

#+OPTIONS: num:nil
#+OPTIONS: toc:nil
#+OPTIONS: mathjax:Y
#+OPTIONS: reveal_single_file:nil
#+OPTIONS: reveal_control:t
#+OPTIONS: reveal-progress:t
#+OPTIONS: reveal_history:nil
#+OPTIONS: reveal_center:t
#+OPTIONS: reveal_rolling_links:nil
#+OPTIONS: reveal_keyboard:t
#+OPTIONS: reveal_overview:t
